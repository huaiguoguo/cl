(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ucenter/mysetting/securityPassword/securityPassword"],{"21d3":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n("2f62");function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),s.forEach(function(e){r(t,e,n[e])})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a={data:function(){return{password:"",repassword:"",code:"",time:60,timeRuning:!1,btnText:"获取验证码",list:["手机验证码","邮箱验证码"],index:0,channel:1}},computed:i({},(0,s.mapGetters)({userInfo:"userInfo",token:"token",expri:"expri"})),methods:{checkForm:function(){return this.password?this.repassword?this.password!=this.repassword?(this.toast("两次密码输入不一致"),!1):!!this.code||(this.toast("请输入验证码"),!1):(this.toast("请确认安全密码"),!1):(this.toast("请输入安全密码"),!1)},getCode:function(){if(this.timeRuning)return!1;this.time=60;var e=this,n={},s="";if(1==this.channel)s="send-sms",n.mobile=this.userInfo.user.mobile;else if(2==this.channel){if(!this.userInfo.user.email)return e.toast("您还没有绑定邮箱, 请先帮定邮箱"),e._setTimeout(function(){t.navigateTo({url:"/pages/ucenter/mysetting/bindEmail/bindEmail"})}),!1;s="send-email",n.email=this.userInfo.user.email}n.type=5,this.httpRequest("user/"+s,"POST",n,function(t){200==t.data.code?e.atInerVal():e.toast(t.data.message)})},atInerVal:function(){var t=this,e=setInterval(function(){t.time>1?(t.time-=1,console.log(t.time," at pages\\ucenter\\mysetting\\securityPassword\\securityPassword.vue:120"),t.btnText=t.time+"秒后重新获取"):(t.btnText="重新获取",t.timeRuning=!1,clearInterval(e))},1e3)},bindPickerChange:function(t){console.log(t.target.value," at pages\\ucenter\\mysetting\\securityPassword\\securityPassword.vue:130"),0==t.target.value?this.channel=1:this.channel=2,this.index=t.target.value},submit:function(){if(!this.checkForm())return!1;var e=this;this.httpRequest("user/change-security-pwd","POST",{secpwd:this.password,channel:this.channel,mobile:e.userInfo.user.mobile,code:this.code},function(n){200==n.data.code?(e.toast("设置成功"),e._setTimeout(function(){t.navigateTo({url:"/pages/ucenter/mysetting/mysetting"})})):e.toast(n.data.message)})}},onLoad:function(){}};e.default=a}).call(this,n("6e42")["default"])},"2e95":function(t,e,n){"use strict";n.r(e);var s=n("21d3"),i=n.n(s);for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);e["default"]=i.a},"74e1":function(t,e,n){"use strict";var s=n("be80"),i=n.n(s);i.a},"7cac":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return i})},ac6a:function(t,e,n){"use strict";n.r(e);var s=n("7cac"),i=n("2e95");for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);n("74e1");var a=n("2877"),o=Object(a["a"])(i["default"],s["a"],s["b"],!1,null,null,null);e["default"]=o.exports},be80:function(t,e,n){}},[["80b6","common/runtime","common/vendor"]]]);