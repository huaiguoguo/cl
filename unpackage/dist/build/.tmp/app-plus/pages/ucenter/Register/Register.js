(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ucenter/Register/Register"],{"1e7b":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){2==e.channel&&(e.channel=1)},e.e1=function(t){1==e.channel&&(e.channel=2)})},r=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r})},"630c":function(e,t,n){"use strict";n.r(t);var o=n("1e7b"),r=n("ddcd");for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);n("6e84");var i=n("2877"),c=Object(i["a"])(r["default"],o["a"],o["b"],!1,null,null,null);t["default"]=c.exports},"6e84":function(e,t,n){"use strict";var o=n("d1c0"),r=n.n(o);r.a},d1c0:function(e,t,n){},ddcd:function(e,t,n){"use strict";n.r(t);var o=n("e891"),r=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);t["default"]=r.a},e891:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("2f62");function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){a(e,t,n[t])})}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i={data:function(){return{account:"",password:"",repassword:"",code:"",channel:1,time:60,timeRuning:!1,btnText:"获取验证码"}},computed:r({},(0,o.mapGetters)({userInfo:"userInfo",token:"token",expri:"expri"})),methods:{agree:function(){e.navigateTo({url:"/pages/ucenter/mysetting/agree/agree"})},checkFormForAccount:function(){if(!this.account)return e.showToast({icon:"none",title:"请输入"+(1==this.channel?"手机号码":"邮箱")}),!1;if(1==this.channel){if(-1==this.account.search(/^1[3-9]{1}\d{9}$/))return e.showToast({icon:"none",title:"请输入正确的手机号码"}),!1}else if(2==this.channel&&-1==this.account.search(/^[^@]*<[a-zA-Z0-9!#$%&'*+\\\/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+\\\/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?>$/))return e.showToast({icon:"none",title:"请输入正确的邮箱地址"}),!1;return!0},checkForm:function(){return!!this.checkFormForAccount()&&(this.password?this.repassword?this.password!=this.repassword?(e.showToast({icon:"none",title:"两次密码输入不一致"}),!1):!!this.code||(e.showToast({icon:"none",title:"请输入验证码"}),!1):(e.showToast({icon:"none",title:"请重复密码"}),!1):(e.showToast({icon:"none",title:"请输入密码"}),!1))},submit:function(){if(!this.checkForm())return!1;var t=this;e.request({url:t.api_host+"site/signup",method:"POST",header:{Authorization:"Bearer "},data:{account:t.account,password:t.password,repassword:t.repassword,code:t.code,channel:t.channel},success:function(n){console.log(n," at pages\\ucenter\\Register\\Register.vue:155");var o=n.data.data;200==n.data.code?(t.detail=o,e.showToast({title:n.data.message,duration:1500}),setTimeout(function(){e.navigateTo({url:"/pages/ucenter/Login/Login"})},2e3)):e.showToast({icon:"none",title:"注册失败"})}})},getCode:function(){if(!this.checkFormForAccount())return!1;var t=this;if(t.timeRuning)return!1;t.time=60;var n="send-sms";1==this.channel?n="send-sms":2==this.channel&&(n="send-email"),e.request({url:t.api_host+"user/"+n,method:"POST",header:{Authorization:"Bearer "},data:{mobile:t.account,type:1},success:function(n){console.log(n," at pages\\ucenter\\Register\\Register.vue:209");var o=n.data;200==o.code?t.setTime():e.showToast({icon:"none",title:o.message})},fail:function(e){console.log(e," at pages\\ucenter\\Register\\Register.vue:221")},complete:function(){}})},setTime:function(){var e=this;e.timeRuning=!0;var t=setInterval(function(){e.time>1?(e.time-=1,console.log(e.time," at pages\\ucenter\\Register\\Register.vue:233"),e.btnText=e.time+"秒后重新获取"):(e.btnText="重新获取",e.timeRuning=!1,clearInterval(t))},1e3)}}};t.default=i}).call(this,n("6e42")["default"])}},[["e03d","common/runtime","common/vendor"]]]);