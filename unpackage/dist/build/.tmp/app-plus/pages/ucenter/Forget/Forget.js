(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ucenter/Forget/Forget"],{"02f7":function(e,t,n){"use strict";n.r(t);var o=n("f50b"),a=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);t["default"]=a.a},"947b":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){2==e.channel&&(e.channel=1)},e.e1=function(t){1==e.channel&&(e.channel=2)})},a=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a})},"963d":function(e,t,n){"use strict";n.r(t);var o=n("947b"),a=n("02f7");for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);n("a5a5");var c=n("2877"),i=Object(c["a"])(a["default"],o["a"],o["b"],!1,null,null,null);t["default"]=i.exports},a5a5:function(e,t,n){"use strict";var o=n("d73c"),a=n.n(o);a.a},d73c:function(e,t,n){},f50b:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("2f62");function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={data:function(){return{account:"",password:"",repassword:"",code:"",channel:1,time:60,timeRuning:!1,btnText:"获取验证码"}},computed:a({},(0,o.mapGetters)({userInfo:"userInfo",token:"token",expri:"expri"})),methods:{checkFormForAccount:function(){if(!this.account)return e.showToast({icon:"none",title:"请输入"+(1==this.channel?"手机号码":"邮箱")}),!1;if(1==this.channel){if(-1==this.account.search(/^1[3-9]{1}\d{9}$/))return e.showToast({icon:"none",title:"请输入正确的手机号码"}),!1}else if(2==this.channel&&-1==this.account.search(/^[^@]*<[a-zA-Z0-9!#$%&'*+\\\/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+\\\/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?>$/))return e.showToast({icon:"none",title:"请输入正确的邮箱地址"}),!1;return!0},checkForm:function(){return!!this.checkFormForAccount()&&(this.password?this.repassword?this.password!=this.repassword?(e.showToast({icon:"none",title:"两次密码输入不一致"}),!1):!!this.code||(e.showToast({icon:"none",title:"请输入验证码"}),!1):(e.showToast({icon:"none",title:"请输入确认密码"}),!1):(e.showToast({icon:"none",title:"请输入密码"}),!1))},submit:function(){if(!this.checkForm())return!1;var t=this;e.request({url:t.api_host+"site/retieve-pwd",method:"POST",header:{Authorization:"Bearer "+t.token},data:{account:t.account,password:t.password,repassword:t.repassword,code:t.code,channel:t.channel},success:function(n){console.log(n," at pages\\ucenter\\Forget\\Forget.vue:148");var o=n.data.data;200==n.data.code?(t.detail=o,e.showToast({title:n.data.message,duration:1500}),setTimeout(function(){e.navigateTo({url:"/pages/ucenter/Login/Login"})},2e3)):e.showToast({icon:"none",title:n.data.message})},fail:function(){}})},getCode:function(){if(!this.checkFormForAccount())return!1;var t=this;if(t.timeRuning)return!1;t.time=60;var n="send-sms";1==this.channel?n="send-sms":2==this.channel&&(n="send-email"),e.request({url:t.api_host+"user/"+n,method:"POST",header:{Authorization:"Bearer "+t.token},data:{mobile:t.account,type:2},success:function(n){console.log(n," at pages\\ucenter\\Forget\\Forget.vue:202");var o=n.data;200==o.code?t.setTime():e.showToast({icon:"none",title:o.message})},fail:function(e){console.log(e," at pages\\ucenter\\Forget\\Forget.vue:214")}})},setTime:function(){var e=this;e.timeRuning=!0;var t=setInterval(function(){e.time>1?(e.time-=1,console.log(e.time," at pages\\ucenter\\Forget\\Forget.vue:224"),e.btnText=e.time+"秒后重新获取"):(e.btnText="重新获取",e.timeRuning=!1,clearInterval(t))},1e3)}}};t.default=c}).call(this,n("6e42")["default"])}},[["2c11","common/runtime","common/vendor"]]]);