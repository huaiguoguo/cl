(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ucenter-mysetting-bindEmail-bindEmail"],{"0a9f":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"edit_input"},[i("v-uni-text",{staticClass:"title"},[t._v("邮箱")]),i("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"请输入要绑定的邮箱"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),i("v-uni-view",{staticClass:"edit_input"},[i("v-uni-text",{staticClass:"title"},[t._v("验证码")]),i("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"请输入验证码"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),i("v-uni-view",{staticClass:"btn",on:{click:function(e){e=t.$handleEvent(e),t.getCode()}}},[t._v(t._s(t.btnText))])],1),i("v-uni-button",{staticClass:"button",attrs:{type:"warn"},on:{click:function(e){e=t.$handleEvent(e),t.submit()}}},[t._v("确认")])],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"21ad":function(t,e,i){"use strict";i.r(e);var n=i("96a1"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},5333:function(t,e,i){"use strict";var n=i("f976"),a=i.n(n);a.a},"929f":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"uni-page-body[data-v-5d9ad942]{background:#000}.container[data-v-5d9ad942]{width:100%;height:100%;color:#fff}.edit_input[data-v-5d9ad942]{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;font-size:%?30?%;border-bottom:.5px solid #ccc;margin-bottom:%?30?%;margin-top:%?30?%}.edit_input .title[data-v-5d9ad942]{width:15%;height:%?70?%;\n\t/* background: #0000FF; */margin:%?30?% %?0?%;margin-left:%?30?%;text-align:center;line-height:%?70?%}.edit_input .input[data-v-5d9ad942]{width:50%;height:%?70?%;\n\t/* background: #ccc; */line-height:%?70?%;margin-left:%?15?%}.edit_input .btn[data-v-5d9ad942]{\n\t/* display: block; */width:30%;height:%?70?%;background:#efa909;padding:%?5?% %?0?%;text-align:center;font-size:%?28?%;border-radius:%?10?%;line-height:%?70?%;font-size:%?28?%;margin-right:%?20?%;margin-left:%?5?%}.button[data-v-5d9ad942]{width:70%;background:#efa909\n\t/* font-size: 30upx; */}body.?%PAGE?%[data-v-5d9ad942]{background:#000}",""])},"96a1":function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("cebc")),o=i("2f62"),s={data:function(){return{email:"",code:"",time:60,timeRuning:!1,btnText:"获取验证码"}},computed:(0,a.default)({},(0,o.mapGetters)({userInfo:"userInfo",token:"token",expri:"expri"})),methods:{submit:function(){if(!this.email)return uni.showToast({icon:"none",title:"邮箱不能为空"}),!1;if(!this.code)return uni.showToast({icon:"non",title:"验证码不能为空"}),!1;var t=this;uni.request({url:t.api_host+"user/bind-email",method:"POST",header:{Authorization:"Bearer "+t.token},data:{email:t.email,code:t.code,type:4},success:function(e){console.log(e),200==e.data.code?(t.getUserInfo(t),t.toast("修改成功",2500),t._setTimeout(function(){uni.navigateTo({url:"/pages/ucenter/mysetting/mysetting"})})):t.toast(e.data.message,2500)},fail:function(t){console.log(t)}})},getCode:function(){var t=this;if(t.timeRuning)return!1;t.time=60,uni.request({url:t.api_host+"user/send-email",method:"POST",header:{Authorization:"Bearer "+t.token},data:{email:t.email,type:4},success:function(e){console.log(e),t.setTime()},fail:function(t){console.log(t)}})},setTime:function(){var t=this;t.timeRuning=!0;var e=setInterval(function(){t.time>1?(t.time-=1,console.log(t.time),t.btnText=t.time+"秒后重新获取"):(t.btnText="重新获取",t.timeRuning=!1,clearInterval(e))},1e3)},bind:function(){var t=this;uni.request({url:t.api_host+"user/bind-email",method:"POST",header:{Authorization:"Bearer "+t.token},data:{email:t.email,code:t.code},success:function(e){console.log(e);var i=e.data.data;200==e.data.code?(t.detail=i,console.log("=============="),console.log(i),console.log("==============")):uni.showToast({icon:"none",title:"绑定失败"})},fail:function(){},complete:function(){}})}}};e.default=s},cfdb:function(t,e,i){"use strict";i.r(e);var n=i("0a9f"),a=i("21ad");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("5333");var s=i("2877"),r=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"5d9ad942",null);e["default"]=r.exports},f976:function(t,e,i){var n=i("929f");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("8e176370",n,!0,{sourceMap:!1,shadowMode:!1})}}]);